<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Test Capteurs iOS</title>
</head>
<body>
  <h1>Test Capteurs iOS</h1>
  <button id="requestBtn">Autoriser l'accès aux capteurs</button>
  <p id="status">En attente...</p>

  <script>
    const btn = document.getElementById('requestBtn');
    const status = document.getElementById('status');

    btn.addEventListener('click', () => {
      if (typeof DeviceOrientationEvent !== 'undefined' &&
          typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission()
          .then(response => {
            if (response === 'granted') {
              window.addEventListener('deviceorientation', (event) => {
                status.textContent = 'Alpha = ' + Math.round(event.alpha);
              });
            } else {
              status.textContent = 'Permission refusée';
            }
          })
          .catch(error => {
            status.textContent = 'Erreur : ' + error;
          });
      } else {
        status.textContent = 'Permission non requise (navigateur OK)';
        window.addEventListener('deviceorientation', (event) => {
          status.textContent = 'Alpha = ' + Math.round(event.alpha);
        });
      }
    });
  </script>
</body>
</html>
